{"abstract":[{"type":"text","text":"The Blue Triangle SDK supports capturing network requests using either the "},{"type":"codeVoice","code":"NetworkCaptureSessionDelegate"},{"type":"text","text":" or "},{"type":"codeVoice","code":"bt"},{"type":"text","text":"-prefixed "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" methods."}],"hierarchy":{"paths":[["doc:\/\/btt-swift-sdk.BlueTriangle\/documentation\/BlueTriangle"]]},"metadata":{"role":"article","modules":[{"name":"BlueTriangle"}],"title":"Network Capture","roleHeading":"Article"},"identifier":{"url":"doc:\/\/btt-swift-sdk.BlueTriangle\/documentation\/BlueTriangle\/NetworkCapture","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"text":"Overview","type":"heading"},{"inlineContent":[{"type":"text","text":"To enable network capture, first configure the SDK with a non-zero network sample rate:"}],"type":"paragraph"},{"syntax":"swift","code":["BlueTriangle.configure { config in","    ...","    config.networkSampleRate = 0.05","}"],"type":"codeListing"},{"inlineContent":[{"text":"A value of ","type":"text"},{"type":"codeVoice","code":"0.05"},{"text":", for example, means that network capture will be randomly enabled for 5% of user sessions. Network requests using a ","type":"text"},{"type":"codeVoice","code":"URLSession"},{"text":" with a ","type":"text"},{"type":"codeVoice","code":"NetworkCaptureSessionDelegate"},{"text":" or made with one of the ","type":"text"},{"type":"codeVoice","code":"bt"},{"text":"-prefixed ","type":"text"},{"type":"codeVoice","code":"URLSession"},{"text":" methods will be associated with the last main timer to have been started at the time a request completes. Note that requests are not associated with a timer until the request ends.","type":"text"}],"type":"paragraph"},{"anchor":"NetworkCaptureSessionDelegate","level":2,"text":"`NetworkCaptureSessionDelegate`","type":"heading"},{"inlineContent":[{"text":"You can use ","type":"text"},{"type":"codeVoice","code":"NetworkCaptureSessionDelegate"},{"text":" or a subclass as your ","type":"text"},{"type":"codeVoice","code":"URLSession"},{"text":" delegate to gather information about network requests when network capture is enabled:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["let sesssion = URLSession(","    configuration: .default,","    delegate: NetworkCaptureSessionDelegate(),","    delegateQueue: nil)","","let timer = BlueTriangle.startTimer(page: Page(pageName: \"MY_PAGE\"))","...","let (data, response) = try await session.data(from: URL(string: \"https:\/\/example.com\")!)"],"type":"codeListing"},{"anchor":"URLSession-Methods","level":2,"text":"`URLSession` Methods","type":"heading"},{"inlineContent":[{"type":"text","text":"Alternatively, use "},{"type":"codeVoice","code":"bt"},{"type":"text","text":"-prefixed "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" methods to capture network requests:"}],"type":"paragraph"},{"rows":[[[{"inlineContent":[{"type":"text","text":"Standard"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Network Capture","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"URLSession.dataTask(with:completionHandler:)"}],"type":"paragraph"}],[{"inlineContent":[{"code":"URLSession.btDataTask(with:completionHandler:)","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"URLSession.data(for:delegate:)"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"URLSession.btData(for:delegate:)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"URLSession.dataTaskPublisher(for:)"}],"type":"paragraph"}],[{"inlineContent":[{"code":"URLSession.btDataTaskPublisher(for:)","type":"codeVoice"}],"type":"paragraph"}]]],"header":"row","alignments":["left","left"],"type":"table"},{"inlineContent":[{"text":"Use these methods just as you would their standard counterparts:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["let timer = BlueTriangle.startTimer(page: Page(pageName: \"MY_PAGE\"))","...","URLSession.shared.btDataTask(with: URL(string: \"https:\/\/example.com\")!) { data, response, error in","    \/\/ ...","}.resume()"],"type":"codeListing"}]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"kind":"article","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/bluetriangle\/networkcapture"]}],"sections":[],"references":{"doc://btt-swift-sdk.BlueTriangle/documentation/BlueTriangle":{"role":"collection","abstract":[{"type":"text","text":"Blue Triangle analytics SDK for iOS."}],"identifier":"doc:\/\/btt-swift-sdk.BlueTriangle\/documentation\/BlueTriangle","type":"topic","title":"BlueTriangle","kind":"symbol","url":"\/documentation\/bluetriangle"}}}