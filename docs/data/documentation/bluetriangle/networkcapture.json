{"primaryContentSections":[{"content":[{"type":"heading","text":"Overview","level":2,"anchor":"overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To enable network capture, first configure the SDK with a non-zero network sample rate:"}]},{"type":"codeListing","syntax":"swift","code":["BlueTriangle.configure { config in","    ...","    config.networkSampleRate = 0.05","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A value of "},{"type":"codeVoice","code":"0.05"},{"type":"text","text":", for example, means that network capture will be randomly enabled for 5% of user sessions. Network requests using a "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" with a "},{"type":"codeVoice","code":"NetworkCaptureSessionDelegate"},{"type":"text","text":" or made with one of the "},{"type":"codeVoice","code":"bt"},{"type":"text","text":"-prefixed "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" methods will be associated with the last main timer to have been started at the time a request completes. Note that requests are not associated with a timer until the request ends."}]},{"type":"heading","text":"`NetworkCaptureSessionDelegate`","level":2,"anchor":"NetworkCaptureSessionDelegate"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can use "},{"type":"codeVoice","code":"NetworkCaptureSessionDelegate"},{"type":"text","text":" or a subclass as your "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" delegate to gather information about network requests when network capture is enabled:"}]},{"type":"codeListing","syntax":"swift","code":["let sesssion = URLSession(","    configuration: .default,","    delegate: NetworkCaptureSessionDelegate(),","    delegateQueue: nil)","","let timer = BlueTriangle.startTimer(page: Page(pageName: \"MY_PAGE\"))","...","let (data, response) = try await session.data(from: URL(string: \"https:\/\/example.com\")!)"]},{"type":"heading","text":"`URLSession` Methods","level":2,"anchor":"URLSession-Methods"},{"type":"paragraph","inlineContent":[{"text":"Alternatively, use ","type":"text"},{"code":"bt","type":"codeVoice"},{"text":"-prefixed ","type":"text"},{"code":"URLSession","type":"codeVoice"},{"text":" methods to capture network requests:","type":"text"}]},{"type":"table","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Standard"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Network Capture"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession.dataTask(with:completionHandler:)"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession.btDataTask(with:completionHandler:)"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"URLSession.data(for:delegate:)","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession.btData(for:delegate:)"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession.dataTaskPublisher(for:)"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession.btDataTaskPublisher(for:)"}]}]]],"header":"row","alignments":["left","left"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use these methods just as you would their standard counterparts:"}]},{"type":"codeListing","code":["let timer = BlueTriangle.startTimer(page: Page(pageName: \"MY_PAGE\"))","...","URLSession.shared.btDataTask(with: URL(string: \"https:\/\/example.com\")!) { data, response, error in","    \/\/ ...","}.resume()"],"syntax":"swift"}],"kind":"content"}],"schemaVersion":{"major":0,"patch":0,"minor":3},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/bluetriangle\/networkcapture"]}],"metadata":{"title":"Network Capture","modules":[{"name":"BlueTriangle"}],"roleHeading":"Article","role":"article"},"kind":"article","hierarchy":{"paths":[["doc:\/\/btt-swift-sdk.BlueTriangle\/documentation\/BlueTriangle"]]},"identifier":{"url":"doc:\/\/btt-swift-sdk.BlueTriangle\/documentation\/BlueTriangle\/NetworkCapture","interfaceLanguage":"swift"},"sections":[],"abstract":[{"type":"text","text":"The Blue Triangle SDK supports capturing network requests using either the "},{"type":"codeVoice","code":"NetworkCaptureSessionDelegate"},{"type":"text","text":" or "},{"type":"codeVoice","code":"bt"},{"type":"text","text":"-prefixed "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" methods."}],"references":{"doc://btt-swift-sdk.BlueTriangle/documentation/BlueTriangle":{"type":"topic","role":"collection","identifier":"doc:\/\/btt-swift-sdk.BlueTriangle\/documentation\/BlueTriangle","kind":"symbol","url":"\/documentation\/bluetriangle","title":"BlueTriangle","abstract":[{"text":"Blue Triangle analytics SDK for iOS.","type":"text"}]}}}